<!DOCTYPE html>
<!--
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.4
Version: 4.0.2
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
{% load static %}
{% load i18n %}
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Eduzen | Your Library</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<meta content="" name="description" />
	<meta content="" name="author" />
	<!-- BEGIN GLOBAL MANDATORY STYLES -->
	<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
	<link href="{% static 'assets/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css" />
	<link href="{% static 'assets/global/plugins/simple-line-icons/simple-line-icons.min.css' %}" rel="stylesheet" type="text/css" />
	<link href="{% static 'assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet' %}" type="text/css" />
	<link href="{% static 'assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet' %}" type="text/css" />
	<link href="{% static 'assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}" rel="stylesheet" type="text/css" />
	<!-- END GLOBAL MANDATORY STYLES -->
	<!-- BEGIN THEME STYLES -->
	<link href="{% static 'assets/global/css/components.css' %}" id="style_components" rel="stylesheet" type="text/css" />
	<link href="{% static 'assets/global/css/plugins.css' %}" rel="stylesheet" type="text/css" />
	<link href="{% static 'assets/admin/layout/css/layout.css' %}" rel="stylesheet" type="text/css" />
	<link id="style_color" href="{% static 'assets/admin/layout/css/themes/darkblue.css' %}" rel="stylesheet" type="text/css" />
	<link href="{% static 'assets/admin/layout/css/custom.css' %}" rel="stylesheet" type="text/css" />
	<link href="{% static 'assets/admin/layout/css/central_custom.css' %}" rel="stylesheet" type="text/css" />
	<!-- END THEME STYLES -->
	<link href='https://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css' />
	<link rel="shortcut icon" href="{% static 'favicon.png' %}" />
</head>

<body class="page-header-fixed page-quick-sidebar-over-content page-full-width">
	<!-- BEGIN HEADER -->
	<div class="page-header navbar navbar-fixed-top">
		<!-- BEGIN HEADER INNER -->
		<div class="page-header-inner">
			<!-- BEGIN LOGO -->
			<div class="page-logo">
				<a href="{% url 'reader:mylibrary' user.id user.username%}">
					<img class="logo-header" src="{% static 'assets/admin/layout/img/logo-big.png' %}" alt="logo" class="logo-default" />
				</a>
				<div class="menu-toggler sidebar-toggler hide">
				</div>
			</div>
			<div class="top-menu">
				<ul class="nav navbar-nav pull-right">
					<li>
						<a href="{% url 'reader:centrallibrary' user.id user.username %}">
							<i class="fa fa-university fa-2x"></i>
							<span class="title">Central Library</span>
						</a>
					</li>
					<li class="">
						<a href="{% url 'reader:mylibrary' user.id user.username%}">
							<i class="fa fa-book fa-2x"></i>
							<span class="title">My Library</span>
						</a>
					</li>
					<li class="active open">
						<a href="profile.html">
							<i class="icon-user"></i>
							<span class="title">Profile</span>
						</a>
					</li>
					<li class="dropdown dropdown-user">
						<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
							<img alt="{{ user.first_name }}" class="img-circle" src="{{ user.extendeduser.get_profile_pic_url }}" />
							<span class="username username-hide-on-mobile"> {{ user.username }}</span>
							<i class="fa fa-angle-down"></i>
						</a>
						<ul class="dropdown-menu dropdown-menu-default">
							<li class="my-logout">
								<a href="{% url 'login:logout' %}"> <i class="icon-key"></i> Log Out </a>
							</li>
						</ul>
					</li>
					<!-- END USER LOGIN DROPDOWN -->
				</ul>
			</div>
			<!-- END TOP NAVIGATION MENU -->
		</div>
		<!-- END HEADER INNER -->
	</div>
	<!-- END HEADER -->
	<div class="clearfix">
	</div>
	<!-- BEGIN CONTAINER -->
	<div class="page-container">
		<div class="page-sidebar-wrapper">
			<div class="page-sidebar navbar-collapse collapse">
				<ul class="page-sidebar-menu" data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
					<!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
					<li class="sidebar-toggler-wrapper">
						<!-- BEGIN SIDEBAR TOGGLER BUTTON -->
						<div class="sidebar-toggler">
						</div>
						<!-- END SIDEBAR TOGGLER BUTTON -->
					</li>

				</ul>
				<!-- END SIDEBAR MENU -->
			</div>
		</div>
		<!-- BEGIN CONTENT -->
		<div class="page-content-wrapper">
			<div class="page-content">
				<!-- BEGIN PAGE HEADER-->
				<h3 id="user-name-profile" class="page-title">
          {{ user.extendeduser.first_name }}
			  </h3>
				<!-- END PAGE HEADER-->
				<!-- BEGIN PAGE CONTENT-->
				<div class="row">
					<div class="col-md-12">
						<div class="user-profile-pic-div">
							<img id="user-profile-pic" src="{{ user.extendeduser.get_profile_pic_url }}">
						</div>
						<div class="user-details">
						</div>
					</div>
				</div>
				</div>
			</div>
		</div>
	</div>
	<div class="page-footer">
		<div class="page-footer-inner">
			2015 &copy; Eduzen. <a href="http://educationzen.com/" title="Eduzen" target="_blank">Eduzen Private Limited</a>
		</div>
		<div class="scroll-to-top">
			<i class="icon-arrow-up"></i>
		</div>
		<a style="visibility:hidden;" class="btn default" id="demo_1">
			<a style="visibility:hidden;" class="btn default" id="demo_2">
	</div>

	<script src="{% static 'assets/global/plugins/jquery.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/global/plugins/jquery-migrate.min.js' %}" type="text/javascript"></script>
	<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
	<script src="{% static 'assets/global/plugins/jquery-ui/jquery-ui.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript' %}"></script>
	<script src="{% static 'assets/global/plugins/jquery.blockui.min.js" type="text/javascript' %}"></script>
	<script src="{% static 'assets/global/plugins/jquery.cokie.min.js" type="text/javascript' %}"></script>
	<script src="{% static 'assets/global/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}" type="text/javascript"></script>
	<!-- END CORE PLUGINS -->
	<script src="{% static 'assets/global/scripts/metronic.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/admin/layout/scripts/layout.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/admin/layout/scripts/quick-sidebar.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/admin/layout/scripts/demo.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/admin/layout/scripts/zip.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/admin/layout/scripts/epub.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/admin/layout/scripts/rangy-core.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/admin/layout/scripts/rangy-serializer.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/global/plugins/bootstrap-confirmation/bootstrap-confirmation.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/global/plugins/bootbox/bootbox.min.js' %}" type="text/javascript"></script>
	<script src="{% static 'assets/admin/pages/scripts/ui-alert-dialog-api.js' %}"></script>

	<script>
		jQuery(document).ready(function() {
      Metronic.init();
			Layout.init();
			QuickSidebar.init();
			Demo.init();
			UIAlertDialogApi.init();

      $(".user-details").append("<div id='username-div'><p class='user-pr'id='username'>" + "{{ user.username }}" + "</p></div>");
			$(".user-details").append("<div id='firstname-div'><p class='user-p' id='first_name'>" + "{{ user.first_name }}" + "</p></div>");
			$(".user-details").append("<div id='lastname-div'><p class='user-p' id='last_name'>" + "{{ user.last_name }}" + "</p></div>");
			$(".user-details").append("<div id='email-div'><p class='user-pr' id='email'>" + "{{ user.email }}" + "</p></div>");
			if("{{ user.extendeduser.address }}" === "None"){
				$(".user-details").append("<div id='address-div'><p class='user-p' id='address'>" + "Address" + "</p></div>");
			} else {
				$(".user-details").append("<div id='address-div'><p class='user-p' id='address'>" + "{{ user.extendeduser.address }}" + "</p></div>");
			}

			if("{{ user.extendeduser.city }}" === "None"){
				$(".user-details").append("<div id='city-div'><p class='user-p' id='city'>" + "City" + "</p></div>");
			} else {
				$(".user-details").append("<div id='city-div'><p class='user-p' id='city'>" + "{{ user.extendeduser.city }}" + "</p></div>");
			}

			if("{{ user.extendeduser.country }}" === "None"){
				$(".user-details").append("<div id='country-div'><p class='user-p' id='country'>" + "Country" + "</p></div>");
			} else {
				$(".user-details").append("<div id='country-div'><p class='user-p' id='country'>" + "{{ user.extendeduser.country }}" + "</p></div>");
			}
			$(".user-p").append('<i class="fa edit-profile fa-pencil"></i>');
			$(".user-details").on('click', '.edit-profile', function(e) {
				var pid = $(this).parent().attr("id");
				var text = ($("#" + pid).text());
				var tid = pid + "__edit";
				var input = $('<input />', {
					'type': 'text',
					'name': 'n' + tid,
					'id': tid,
					'class': 'text_box_edit_pr',
					'value': text
				});
				$("#" + pid).parent().append(input);
				$("#" + pid).remove();
				input.focus();
			});

			$("input").live('blur', function(e) {
				var id = $(this).attr("id");
				var tid = id.split('__')[0];
				if ($(this).val() === "" || $(this).val() == undefined) {
					bootbox.alert("The field is edited by you is required. Please provide a valid value.", function() {
						location.reload();
					});
				} else {
					var input = $('<p />', {
						'id': tid,
						'class': 'user-p',
						'html': $(this).val()
					});
					console.log(tid);
					console.log($(this).val());
					$.ajax({
            type: 'POST',
            url:"/editprofile",
            data:{'field':tid, 'value':$(this).val(),'csrfmiddlewaretoken':"{{ csrf_token }}"},
            success:function(response)
            {
              console.log(response);
							location.reload();
            }
          });
				}
				$(this).parent().append(input);
				$(".user-p").append('<i class="fa edit-profile fa-pencil"></i>');
			});

		}); // End of JQuery document ready block
	</script>
	<!-- END JAVASCRIPTS -->

</body>
<!-- END BODY -->
</html>
